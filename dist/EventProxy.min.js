"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(e):e.EventProxy=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0,function(e){var u,i=function(e){if("default"==e)throw new Error("The 1st argument must be a string except default")},a=function(e){return"function"==typeof e},y=Array.prototype.slice,f={default:{type:"default",queue:[]}},t=function(){};return t.prototype.$eventLibary=f,t.prototype.on=function(e,t){if(i(e),!a(t))throw new Error("The handler of the event of "+e+" is not a function");var n=this.$eventLibary,o=n[e];if(o)return o.queue.push(t);n[e]=function(e){var t={};for(var n in e)t[n]=e[n];return JSON.parse(JSON.stringify(t))}(n.default),n[e].type=e,n[e].queue.push(t)},t.prototype.once=function(t,n){var o=this;this.on(t,function e(){o.off(t,e),n.apply(null,arguments)})},t.prototype.off=function(e,t){if(e){var n=this.$eventLibary[e];if(n)if(t){for(var o=n.queue,r=o.length;r--;)if(o[r]===t){o.splice(r,1);break}}else n.queue=[]}else this.$eventLibary=f},t.prototype.emit=function(){var e=u=arguments[0];i(e);var t=y.call(arguments,1),n=this.$eventLibary[e],o=n.queue;if(!n||!Array.isArray(o))throw new Error("The event of "+e+" is not exist");for(var r,f=0;r=o[f++];)try{r.apply(null,t)}catch(e){console.warn('This "'+n.type+'" event handler goes wrong, occured in :\n\n'+r.toString()+"\n\nThe error info as follow: \n"+e.stack)}},t.prototype.all=function(n,o){if(Array.isArray(n)&&a(o)){var r=n.length,f=[],e=function(){var e=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return!1}(n,u);if(!1!==e){var t=y.call(arguments);f[e]=t}--r||o.call(null,function e(t){for(var n=[],o=t.length,r=!1,f=0;f<o;f++){var i=t[f];Array.isArray(i)?(n=n.concat(i),r=!0):n.push(i)}return r?e(n):n}(f))};if(r)for(var t,i=0;t=n[i++];)this.once(t,e)}},t});
//# sourceMappingURL=EventProxy.min.js.map
