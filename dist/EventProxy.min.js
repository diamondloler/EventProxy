"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(e):e.EventProxy=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0,function(e){var u=function(e){if("default"==e)throw new Error("The 1st argument must be a string except default")},r=function(e){return"function"==typeof e},i=Array.prototype.slice,t=function(){};return t.prototype.$eventLibary={default:{type:"default",queue:[],isOnce:!1}},t.prototype.on=function(e,t){if(u(e),!r(t))throw new Error("The handler of the event of "+e+" is not a function");var n=this.$eventLibary,o=n[e];if(o)return o.queue.push(t);n[e]=function(e){var t={};for(var n in e)t[n]=e[n];return JSON.parse(JSON.stringify(t))}(n.default),n[e].type=e,n[e].queue.push(t)},t.prototype.once=function(e,t){this.on(e,t),this.$eventLibary[e].isOnce=!0},t.prototype.emit=function(){var e=arguments[0];u(e);var t=i.call(arguments,1),n=this.$eventLibary[e],o=this.$aboutAll,r=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return!1}(o.eventQueue,e);if(!1!==r)this.$emitAll(o,t,r);else{if(!(n&&Array.isArray(n.queue)&&0<n.queue.length))throw new Error("The event of "+e+" is not exist");this.$emitNormal(n,t)}},t.prototype.$aboutAll={eventQueue:[],callBackArgs:[],success:null,reset:function(){this.eventQueue=[],this.callBackArgs=[],this.success=null}},t.prototype.$emitNormal=function(e,t){var n=e.isOnce;if("ran"!==n){for(var o,r=0,u=e.queue;o=u[r++];)o.apply(null,t);n&&(e.isOnce="ran")}},t.prototype.$emitAll=function(e,t,n){var o=e.eventQueue,r=e.callBackArgs;o.splice(n,1),r[n]=t,0==o.length&&(e.callBackArgs=function e(t){for(var n=[],o=t.length,r=!1,u=0;u<o;u++){var i=t[u];Array.isArray(i)?(n=n.concat(i),r=!0):n.push(i)}return r?e(n):n}(r),e.success.call(null,e.callBackArgs),this.$aboutAll.reset())},t.prototype.all=function(e,t){if(Array.isArray(e)&&r(t)){var n=this.$aboutAll;n.eventQueue=n.eventQueue.concat(e),n.success=t}},t});
//# sourceMappingURL=EventProxy.min.js.map
