"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(e):e.EventProxy=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0,function(e){var u=function(e){if("default"==e)throw new Error("The 1st argument must be a string except default")},r=function(e){return"function"==typeof e},i=Array.prototype.slice,t=function(){};return t.prototype.$eventLibary={default:{type:"default",queue:[]}},t.prototype.on=function(e,t){if(u(e),!r(t))throw new Error("The handler of the event of "+e+" is not a function");var n=this.$eventLibary,o=n[e];if(o)return o.queue.push(t);n[e]=function(e){var t={};for(var n in e)t[n]=e[n];return JSON.parse(JSON.stringify(t))}(n.default),n[e].type=e,n[e].queue.push(t)},t.prototype.once=function(t,n){var o=this;this.on(t,function e(){o.off(t,e),n.apply(null,arguments)})},t.prototype.off=function(e,t){if(e){var n=this.$eventLibary[e];if(n)if(t){for(var o=n.queue,r=o.length;r--;)if(o[r]===t){o.splice(r,1);break}}else n.queue=[]}else this.$eventLibary={default:{type:"default",queue:[]}}},t.prototype.emit=function(){var e=arguments[0];u(e);var t=i.call(arguments,1),n=this.$eventLibary[e],o=this.$aboutAll,r=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return!1}(o.eventQueue,e);if(!1!==r)this.$emitAll(o,t,r);else{if(!n||!Array.isArray(n.queue))throw new Error("The event of "+e+" is not exist");this.$emitNormal(n,t)}},t.prototype.$aboutAll={eventQueue:[],callBackArgs:[],success:null,reset:function(){this.eventQueue=[],this.callBackArgs=[],this.success=null}},t.prototype.$emitNormal=function(t,e){for(var n,o=0,r=t.queue;n=r[o++];)try{n.apply(null,e)}catch(e){console.warn('This "'+t.type+'" event handler goes wrong, occured in :\n\n'+n.toString()+"\n\nThe error info as follow: \n"+e.stack)}},t.prototype.$emitAll=function(e,t,n){var o=e.eventQueue,r=e.callBackArgs;o.splice(n,1),r[n]=t,0==o.length&&(e.callBackArgs=function e(t){for(var n=[],o=t.length,r=!1,u=0;u<o;u++){var i=t[u];Array.isArray(i)?(n=n.concat(i),r=!0):n.push(i)}return r?e(n):n}(r),e.success.call(null,e.callBackArgs),this.$aboutAll.reset())},t.prototype.all=function(e,t){if(Array.isArray(e)&&r(t)){var n=this.$aboutAll;n.eventQueue=n.eventQueue.concat(e),n.success=t}},t});
//# sourceMappingURL=EventProxy.min.js.map
