"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define(t):e.EventProxy=t()}("undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0,function(){var u,f=function(e){if("default"==e)throw new Error('The 1st argument must be a string except "default"')},a=function(e){return"function"==typeof e},l=Array.prototype.slice,i={default:{type:"default",queue:[]}},e=function(){};return e.prototype.$eventLibary=i,e.prototype.on=function(e,t){if(f(e),!a(t))throw new Error("The handler of the event of "+e+" is not a function");var n=this.$eventLibary,o=n[e];if(o)return o.queue.push(t);n[e]=function(e){var t={};for(var n in e)t[n]=e[n];return JSON.parse(JSON.stringify(t))}(n.default),n[e].type=e,n[e].queue.push(t)},e.prototype.once=function(t,n){var o=this;this.on(t,function e(){o.off(t,e),n.apply(null,arguments)})},e.prototype.off=function(e,t){if(e){var n=this.$eventLibary[e];if(n)if(t){for(var o=n.queue,r=o.length;r--;)if(o[r]===t){o.splice(r,1);break}}else n.queue=[]}else this.$eventLibary=i},e.prototype.emit=function(){var e=u=arguments[0];f(e);var t=l.call(arguments,1),n=this.$eventLibary[e],o=n.queue;if(!n||!Array.isArray(o))throw new Error("The event of "+e+" is not exist");for(var r,i=0;r=o[i++];)try{r.apply(null,t)}catch(e){console.warn('This "'+n.type+'" event handler goes wrong, occured in :\n\n'+r.toString()+"\n\nThe error info as follow: \n"+e.stack)}},e.prototype.all=function(n,o){if(Array.isArray(n)&&a(o)){var r=n.length,i=[],e=function(){var e=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return!1}(n,u);if(!1!==e){var t=l.call(arguments);i[e]=t}--r||o.call(null,function e(t){for(var n=[],o=t.length,r=!1,i=0;i<o;i++){var f=t[i];Array.isArray(f)?(n=n.concat(f),r=!0):n.push(f)}return r?e(n):n}(i))};if(r)for(var t,f=0;t=n[f++];)this.once(t,e)}},e});
//# sourceMappingURL=EventProxy.min.js.map
